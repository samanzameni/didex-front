<form
  arrangeStack
  autocomplete="off"
  [formGroup]="authFormGroup"
  (ngSubmit)="onSubmit()"
  #form
>
  <h1 class="title">
    <img src="assets/images/logo-white-symbol.svg" alt="logo" />Sign in to
    <b>DidEx</b>
  </h1>
  <hr class="title-seperator" />

  <p class="footnote forgot-password">
    <a routerLink="/auth/forgot-password">Forgot password?</a>
  </p>

  <mat-form-field appearance="outline" for="email">
    <mat-label>Email</mat-label>
    <input
      type="email"
      formControlName="email"
      matInput
      name="email"
      id="email"
      placeholder="abc@example.com"
      autofocus
      #emailInput
    />
  </mat-form-field>
  <ng-container *ngIf="authFormControls.email.dirty">
    <mat-error *ngIf="authFormControls.email.hasError('required')">
      Email is required
    </mat-error>
    <mat-error *ngIf="authFormControls.email.hasError('email')">
      Email must be a valid address
    </mat-error>
    <ng-container *ngIf="authFormErrors && authFormErrors.email">
      <mat-error *ngFor="let error of authFormErrors.email">
        {{ error }}
      </mat-error>
    </ng-container>
  </ng-container>

  <mat-form-field appearance="outline" for="password">
    <mat-label>Password</mat-label>
    <input
      [type]="isHidden ? 'password' : 'text'"
      formControlName="password"
      matInput
      name="password"
      id="password"
    />
    <mat-icon matSuffix (click)="toggleHidePassword()">{{
      isHidden ? 'visibility_off' : 'visibility'
    }}</mat-icon>
  </mat-form-field>
  <ng-container *ngIf="authFormControls.password.dirty">
    <mat-error *ngIf="authFormControls.password.hasError('required')">
      Password is required
    </mat-error>
    <ng-container *ngIf="authFormErrors && authFormErrors.password">
      <mat-error *ngFor="let error of authFormErrors.password">
        {{ error }}
      </mat-error>
    </ng-container>
  </ng-container>

  <div arrangeCenter #recaptcha class="recaptcha-container"></div>
  <input type="hidden" name="token" formControlName="token" value="" />

  <pro-button
    color="primary"
    type="submit"
    [disabled]="!isFormValid"
    #submitButton
  >
    Sign In
  </pro-button>

  <div class="description">
    <p class="footnote captcha">
      This site is protected by reCAPTCHA and the Google
      <a href="https://policies.google.com/privacy" target="_blank"
        >Privacy Policy</a
      >
      and
      <a href="https://policies.google.com/terms" target="_blank"
        >Terms of Service</a
      >
      apply.
    </p>

    <p class="footnote message">
      Not a member?
      <a tabindex="-1" routerLink="/auth/signup">Sign up</a>
    </p>
  </div>
</form>
